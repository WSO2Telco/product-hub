<?xml version="1.0" encoding="UTF-8"?>
<!--
 ~ Copyright (c) 2005-2010, WSO2 Inc. (http://wso2.com) All Rights Reserved.
 ~
 ~ WSO2 Inc. licenses this file to you under the Apache License,
 ~ Version 2.0 (the "License"); you may not use this file except
 ~ in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~    http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing,
 ~ software distributed under the License is distributed on an
 ~ "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 ~ KIND, either express or implied.  See the License for the
 ~ specific language governing permissions and limitations
 ~ under the License.
 -->
<assembly>
    <id>bin</id>
    <formats>
        <format>zip</format>
    </formats>
    <includeBaseDirectory>false</includeBaseDirectory>
    <fileSets>
        <fileSet>
            <!--<directory>target/wso2carbon-core-${carbon.platform.version}</directory>-->
            <!-- zip dir to build -->
            <directory>target/intgw/wso2am-2.5.0</directory>
            <outputDirectory>wso2telcohub-${pom.version}</outputDirectory>
            <excludes>
                <exclude>**/bin/wso2server.sh</exclude>
                <exclude>**/bin/wso2server.bat</exclude>
                <exclude>**/conf/axis2/axis2.xml</exclude>
                <exclude>**/conf/axis2/axis2.xml_NHTTP</exclude>
                <exclude>**/conf/axis2/axis2.xml_PT</exclude>
                <exclude>**/conf/axis2/tenant-axis2.xml</exclude>
                <exclude>**/conf/synapse.xml</exclude>
                <exclude>**/conf/security/Owasp.CsrfGuard.Carbon.properties</exclude>
                <exclude>**/conf/security/authenticators.xml</exclude>
		        <exclude>**/conf/tomcat/carbon/WEB-INF/web.xml</exclude>
		        <exclude>**/log4j.properties</exclude>
                <exclude>**/services/sample01.aar</exclude>
                <exclude>**/repository/services/version/**</exclude>
                <exclude>**/version.txt</exclude>
                <exclude>**/README.txt</exclude>
                <exclude>**/LICENSE.txt</exclude>
                <exclude>**/release-notes.html</exclude>
                <exclude>**/carbon.xml</exclude>
                <exclude>**/registry.xml</exclude>
                <exclude>**/master-datasources.xml</exclude>
        	    <exclude>**/repository/components/plugins/woden_${woden.version}.jar</exclude>
                <!--note: to overwrite a file you need to exclude them first -->
                <exclude>**/repository/resources/api_templates/velocity_template.xml</exclude>
                <exclude>**repository/resources/default-tiers/default-app-tiers.xml</exclude>
                <exclude>**repository/resources/default-tiers/default-tiers.xml</exclude>
                <exclude>**repository/deployment/server/jaggeryapps/store/**</exclude>
                <exclude>**repository/deployment/server/jaggeryapps/publisher/**</exclude>

                <exclude>**/lib/org.wso2.ciphertool-1.0.0-wso2v2.jar</exclude>
                <exclude>**/secret-conf.properties</exclude>
                <exclude>**/repository/components/plugins/saxon*.jar</exclude>
                <exclude>**/user-mgt.xml</exclude>

                <!-- Remove dbscripts -->
                <exclude>**/dbscripts/db2.sql</exclude>
                <exclude>**/dbscripts/derby.sql</exclude>
                <exclude>**/dbscripts/he.sql</exclude>
                <exclude>**/dbscripts/informix.sql</exclude>
                <exclude>**/dbscripts/oracle.sql</exclude>
                <exclude>**/dbscripts/oracle_rac.sql</exclude>
                <exclude>**/dbscripts/h2.sql</exclude>

                <!-- Remove multiple versions of same jar for 1.10.x-->
                <exclude>**/repository/components/plugins/js_1.6.0.R7-wso2v1.jar</exclude>
                <exclude>**/repository/components/plugins/json_1.0.0.wso2v1.jar</exclude>
                <exclude>**/repository/components/plugins/wss4j_1.5.11.wso2v9.jar</exclude>
                <exclude>**/repository/components/plugins/nimbus-jose-jwt_2.26.1.wso2v2.jar</exclude>
                <exclude>**/repository/components/plugins/net.minidev.json-smart_1.2.0.jar</exclude>
                <!--<exclude>**/repository/components/plugins/wss4j_1.5.11.wso2v10.jar</exclude>-->
                <exclude>**/repository/components/plugins/rampart-trust_1.6.1.wso2v14.jar</exclude>
                <exclude>**/repository/components/plugins/rampart-policy_1.6.1.wso2v14.jar</exclude>
                <exclude>**/repository/components/plugins/rampart-core_1.6.1.wso2v14.jar</exclude>
                <exclude>**/repository/components/plugins/commons-io_2.0.0.wso2v2.jar</exclude>
                <exclude>**/repository/components/plugins/com.google.gson_2.1.0.jar</exclude>
                <exclude>**/repository/components/plugins/com.google.gson_2.2.4.jar</exclude>
                <!--<exclude>**/repository/components/plugins/org.wso2.carbon.captcha.mgt_4.2.0.jar</exclude>-->
                <exclude>**/repository/components/plugins/guava_12.0.0.wso2v1.jar</exclude>
                <exclude>**/repository/components/plugins/wadl-core_1.1.3.wso2v2.jar</exclude>
		        <exclude>**/repository/components/plugins/org.wso2.carbon.hostobjects.sso_4.3.2.jar</exclude>
		        <exclude>**/repository/components/plugins/com.google.guava_15.0.0.jar</exclude>
		        <exclude>**/repository/components/plugins/httpclient_4.3.2.wso2v1.jar</exclude>
                <exclude>**/repository/components/plugins/org.wso2.carbon.identity.oauth.stub_5.0.8.jar</exclude>
                <!--This has excluded because commons-scxml_0.9.0.wso2v1 exports the same version-->
		        <exclude>**/repository/components/plugins/commons-digester_1.8.1.wso2v1.jar</exclude>
                <!--<exclude>**/repository/components/plugins/waffle_1.4.0.wso2v1.jar</exclude>-->
                <!--<exclude>**/repository/components/plugins/compass_2.0.1.wso2v2.jar</exclude>-->
                <!--<exclude>**/repository/components/plugins/poi_3.9.0.wso2v1.jar</exclude>-->

                <exclude>**/lib/endorsed/xalan*.jar</exclude>
                <exclude>**/conf/thrift-authentication.xml</exclude>
                <exclude>**/repository/components/features/org.wso2.carbon.apimgt.store_${apim.feature.version}/store/**</exclude>
                <exclude>**/repository/components/features/org.wso2.carbon.apimgt.store_${apim.feature.version}/admin/**</exclude>
                <exclude>**/repository/components/features/org.wso2.carbon.apimgt.publisher_${apim.feature.version}/publisher/**</exclude>
                <exclude>**/repository/components/features/org.wso2.carbon.apimgt.core_${apim.feature.version}/libs/**</exclude>
            </excludes>
        </fileSet>
        <fileSet>
            <directory>target/wso2carbon-core-${carbon.platform.version}</directory>
            <outputDirectory>wso2telcohub-${pom.version}</outputDirectory>
            <includes>
                <include>**/*.sh</include>
            </includes>
	    <excludes>
                <exclude>**/wso2server.sh</exclude>
	    </excludes>
            <fileMode>755</fileMode>
        </fileSet>
	<fileSet>
          <directory>../../p2-profile/product/target/wso2carbon-core-${carbon.platform.version}/repository/components/lib</directory>
          <outputDirectory>wso2telcohub-${pom.version}/repository/components/lib</outputDirectory>
	    <includes>
                <include>**/httpmime-4.2.5.jar</include>
		<include>**/encoder-1.1.jar</include>
            </includes>
        </fileSet>
	<fileSet>
          <directory>../../p2-profile/product/target/wso2carbon-core-${carbon.platform.version}/lib/endorsed</directory>
          <outputDirectory>wso2telcohub-${pom.version}/lib/endorsed</outputDirectory>
	    <includes>
                <include>**/Saxon-HE-9.4.jar</include>
            </includes>
        </fileSet>
        <fileSet>
            <directory>target</directory>
            <outputDirectory>wso2telcohub-${pom.version}/repository/components/lib</outputDirectory>
            <includes>
                <include>validator-hand-${com.wso2telco.dep.version}.jar</include>
            </includes>
        </fileSet>


        <fileSet>
            <directory>src/main/conf/synapse-configs</directory>
            <outputDirectory>wso2telcohub-${pom.version}/repository/deployment/server/synapse-configs</outputDirectory>
        </fileSet>
  	    <fileSet>
            <directory>src/main/conf/synapse-configs/default/sequences</directory>
            <outputDirectory>wso2telcohub-${pom.version}/repository/resources/apim-synapse-config/</outputDirectory>
        </fileSet>
	    <fileSet>
           <directory>../../p2-profile/product/target/wso2carbon-core-${carbon.platform.version}/repository/conf/advanced/</directory>
           <outputDirectory>wso2telcohub-${pom.version}/repository/conf/advanced</outputDirectory>
           <includes>
               <include>**/qpid-config.xml</include>
               <include>**/qpid-jmxremote.access</include>
               <include>**/qpid-virtualhosts.xml</include>
           </includes>
        </fileSet>
	<fileSet>
	   <directory>../../p2-profile/product/target/wso2carbon-core-${carbon.platform.version}/repository/conf/identity/</directory>
	   <outputDirectory>wso2telcohub-${pom.version}/repository/conf/identity</outputDirectory>
        <excludes>
            <exclude>**/identity.xml</exclude>
        </excludes>
	</fileSet>


        <!--get all plugins rajith todo - remove 4 additional pluins-->
        <fileSet>
            <directory>
                ../../p2-profile/product/target/p2-repo/plugins
            </directory>
            <outputDirectory>wso2telcohub-${pom.version}/repository/components/dropins</outputDirectory>
            <includes>
                <include>**/**.jar</include>
            </includes>
        </fileSet>

        <!-- Start WSO2-Telco related changes-->

        <!-- copying telco modules -->
        <fileSet>
            <directory>
                ../../p2-profile/product/target/features/hub-core/modules
            </directory>
            <outputDirectory>wso2telcohub-${pom.version}/modules</outputDirectory>
            <includes>
                <include>**/**</include>
            </includes>
        </fileSet>

	    <!-- api templates -->
	    <fileSet>
            <directory>../resources/api_templates</directory>
            <outputDirectory>wso2telcohub-${pom.version}/repository/resources/api_templates</outputDirectory>
            <includes>
                <include>velocity_template.xml</include>
            </includes>
        </fileSet>

        <!-- API Custom Sequences only custom sequences are copied -->
	    <fileSet>
            <directory>../resources/customsequences</directory>
            <outputDirectory>wso2telcohub-${pom.version}/repository/resources/customsequences</outputDirectory>
            <includes>
                <include>**/**.xml</include>
            </includes>
        </fileSet>

        <!-- start copy wso2-telco webapps -->

        <!-- copy aggregator-blacklist webapp -->
        <fileSet>
            <directory>
                ../../p2-profile/product/target/features/webapps/aggregator-blacklist/generated
            </directory>
            <outputDirectory>${pom.artifactId}-${pom.version}/repository/deployment/server/webapps</outputDirectory>
            <includes>
                <include>aggregator-blacklist.war</include>
            </includes>
        </fileSet>

        <!-- copy blacklist-whitelist-service webapp-->
        <fileSet>
            <directory>
                ../../p2-profile/product/target/features/webapps/blacklist-whitelistservice/generated
            </directory>
            <outputDirectory>${pom.artifactId}-${pom.version}/repository/deployment/server/webapps</outputDirectory>
            <includes>
                <include>blacklist-whitelist-service.war</include>
            </includes>
        </fileSet>

        <!-- copy workflow-service webapp-->
        <fileSet>
            <directory>
                ../../p2-profile/product/target/features/webapps/workflow-service/generated
            </directory>
            <outputDirectory>${pom.artifactId}-${pom.version}/repository/deployment/server/webapps</outputDirectory>
            <includes>
                <include>workflow-service.war</include>
            </includes>
        </fileSet>

        <!-- copy quota-service webapp-->
        <fileSet>
            <directory>
                ../../p2-profile/product/target/features/webapps/quota-service/generated
            </directory>
            <outputDirectory>${pom.artifactId}-${pom.version}/repository/deployment/server/webapps</outputDirectory>
            <includes>
                <include>quota-service.war</include>
            </includes>
        </fileSet>

	<!-- copy activiti webapps  -->
        <fileSet>
            <directory>
                ../../p2-profile/product/target/features/webapps/activiti-explorer/webapps
            </directory>
            <outputDirectory>${pom.artifactId}-${pom.version}/repository/deployment/server/webapps</outputDirectory>
            <includes>
                <include>activiti-explorer.war</include>
            </includes>
        </fileSet>

        <!-- copy ratecard-service webapp-->
        <fileSet>
            <directory>
                ../../p2-profile/product/target/features/webapps/ratecard-service/generated
            </directory>
            <outputDirectory>${pom.artifactId}-${pom.version}/repository/deployment/server/webapps</outputDirectory>
            <includes>
                <include>ratecard-service.war</include>
            </includes>
        </fileSet>

        <!-- copy activiti-rest webapp -->
        <fileSet>
            <directory>
                ../../p2-profile/product/target/features/webapps/activiti-explorer/webapps
            </directory>
            <outputDirectory>${pom.artifactId}-${pom.version}/repository/deployment/server/webapps</outputDirectory>
            <includes>
                <include>activiti-rest.war</include>
            </includes>
        </fileSet>
	
	    <!-- copy manage-service webapp -->
	    <fileSet>
            <directory>
                ../../p2-profile/product/target/features/webapps/manage-service/generated
            </directory>
            <outputDirectory>${pom.artifactId}-${pom.version}/repository/deployment/server/webapps</outputDirectory>
            <includes>
                <include>manage-service.war</include>
            </includes>
        </fileSet>
        <!-- end of telco webapps -->

        <!--copy workflow bar files -->
        <fileSet>
            <directory>
                ../../p2-profile/product/target/features/webapps/activiti-explorer/workflow
            </directory>
            <outputDirectory>${pom.artifactId}-${pom.version}/repository/resources/workflow</outputDirectory>
            <includes>
                <include>ApplicationCreationApprovalWorkflow.bar</include>
                <include>SubscriptionCreationApprovalWorkflow.bar</include>
            </includes>
        </fileSet>

        <!-- Default Tiers -->
        <fileSet>
            <directory>../resources/default-tiers</directory>
            <outputDirectory>wso2telcohub-${pom.version}/repository/resources/default-tiers</outputDirectory>
            <includes>
                <include>**/**.xml</include>
            </includes>
        </fileSet>

        <!-- Start DEP Hub related db-scripts -->
        <fileSet>
            <directory>
                ../../p2-profile/product/target/features/hub-core/sql
            </directory>
            <outputDirectory>wso2telcohub-${pom.version}/dbscripts/dep-hub</outputDirectory>
            <includes>
                <include>**/**</include>
            </includes>
        </fileSet>
        <!--End of DEP Hub related dbscripts -->


        <!-- Start DEP Hub related jaggery apps -->
        <fileSet>
            <directory>../../p2-profile/product/target/features/jaggeryapps/store</directory>
            <outputDirectory>wso2telcohub-${pom.version}/repository/deployment/server/jaggeryapps/store</outputDirectory>
            <includes>
                <include>**/**</include>
            </includes>
        </fileSet>

        <fileSet>
            <directory>../../p2-profile/product/target/features/jaggeryapps/publisher</directory>
            <outputDirectory>wso2telcohub-${pom.version}/repository/deployment/server/jaggeryapps/publisher</outputDirectory>
            <includes>
                <include>**/**</include>
            </includes>
        </fileSet>
        <!--End of DEP Hub related jaggery apps -->
    </fileSets>

    <files>

        <file>
            <source>src/main/conf/axis2_TM.xml</source>
            <outputDirectory>wso2telcohub-${pom.version}/repository/conf/axis2</outputDirectory>
            <destName>axis2_TM.xml</destName>
        </file>

	<file>
            <source>src/main/conf/axis2_blocking_client.xml</source>
            <outputDirectory>wso2telcohub-${pom.version}/repository/conf/axis2</outputDirectory>
            <destName>axis2_blocking_client.xml</destName>
        </file>

	<file>
            <source>src/main/conf/tenant-axis2.xml</source>
            <outputDirectory>wso2telcohub-${pom.version}/repository/conf/axis2</outputDirectory>
            <destName>tenant-axis2.xml</destName>
        </file>

        <file>
            <source>src/main/conf/registry_TM.xml</source>
            <outputDirectory>wso2telcohub-${pom.version}/repository/conf</outputDirectory>
            <destName>registry_TM.xml</destName>
            <filtered>true</filtered>
            <fileMode>644</fileMode>
        </file>
        <file>
            <source>src/main/conf/thrift-authentication.xml</source>
            <outputDirectory>wso2telcohub-${pom.version}/repository/conf</outputDirectory>
            <destName>thrift-authentication.xml</destName>
        </file>
        <file>
            <source>src/main/conf/log4j.properties</source>
            <outputDirectory>wso2telcohub-${pom.version}/repository/conf</outputDirectory>
            <destName>log4j.properties</destName>
            <filtered>true</filtered>
        </file>
        <file>
            <source>src/main/conf/synapse.properties</source>
            <outputDirectory>wso2telcohub-${pom.version}/repository/conf</outputDirectory>
            <destName>synapse.properties</destName>
            <filtered>true</filtered>
        </file>
        <file>
            <source>src/main/conf/synapse-handlers.xml</source>
            <outputDirectory>wso2telcohub-${pom.version}/repository/conf</outputDirectory>
            <destName>synapse-handlers.xml</destName>
            <filtered>true</filtered>
            <fileMode>644</fileMode>
        </file>
        <file>
            <source>src/main/conf/datasources.properties</source>
            <outputDirectory>wso2telcohub-${pom.version}/repository/conf</outputDirectory>
            <destName>datasources.properties</destName>
            <filtered>true</filtered>
        </file>
        <file>
            <source>src/main/conf/nhttp.properties</source>
            <outputDirectory>wso2telcohub-${pom.version}/repository/conf</outputDirectory>
            <destName>nhttp.properties</destName>
            <filtered>true</filtered>
        </file>
        <file>
            <source>src/main/conf/passthru-http.properties</source>
            <outputDirectory>wso2telcohub-${pom.version}/repository/conf</outputDirectory>
            <destName>passthru-http.properties</destName>
            <filtered>true</filtered>
        </file>
        <file>
            <source>src/main/conf/jndi.properties</source>
            <outputDirectory>wso2telcohub-${pom.version}/repository/conf</outputDirectory>
            <destName>jndi.properties</destName>
            <filtered>true</filtered>
        </file>

        <file>
            <source>../../../LICENSE.txt</source>
            <outputDirectory>wso2telcohub-${pom.version}</outputDirectory>
            <filtered>true</filtered>
            <fileMode>644</fileMode>
        </file>
        <file>
            <source>../../../README.txt</source>
            <outputDirectory>wso2telcohub-${pom.version}</outputDirectory>
            <filtered>true</filtered>
            <fileMode>644</fileMode>
        </file>
        <file>
            <source>src/main/conf/XMLInputFactory.properties</source>
            <outputDirectory>wso2telcohub-${pom.version}</outputDirectory>
            <filtered>true</filtered>
            <fileMode>644</fileMode>
        </file>
        <file>
            <source>../../../release-notes.html</source>
            <outputDirectory>wso2telcohub-${pom.version}</outputDirectory>
            <destName>release-notes.html</destName>
            <fileMode>644</fileMode>
        </file>
        <file>
            <source>target/wso2carbon-core-${carbon.platform.version}/bin/version.txt</source>
            <outputDirectory>wso2telcohub-${pom.version}/bin/</outputDirectory>
            <filtered>true</filtered>
            <fileMode>644</fileMode>
        </file>
        <file>
            <source>src/main/startup-scripts/wso2server.sh</source>
            <outputDirectory>wso2telcohub-${pom.version}/bin/</outputDirectory>
            <filtered>true</filtered>
            <fileMode>755</fileMode>
        </file>

        <file>
            <source>src/main/startup-scripts/wso2server.bat</source>
            <outputDirectory>wso2telcohub-${pom.version}/bin/</outputDirectory>
            <filtered>true</filtered>
            <fileMode>755</fileMode>
        </file>

        <file>
            <source>target/wso2carbon-core-${carbon.platform.version}/repository/conf/carbon.xml</source>
            <outputDirectory>wso2telcohub-${pom.version}/repository/conf/</outputDirectory>
            <filtered>true</filtered>
	    <fileMode>644</fileMode>
        </file>
        <file>
            <source>src/main/conf/cloud-services-desc.xml</source>
            <outputDirectory>wso2telcohub-${pom.version}/repository/conf/multitenancy</outputDirectory>
            <filtered>true</filtered>
        </file>
        <!--todo add  application-authentication.xml to wso2telcohub-${pom.version}/repository/conf/identity -->

        <!--todo  extract the features and move to relevant locations  -->
        <!--
                     master-datasources.xml
                     registry.xml
                     api-manager.xml
                     user-mgt.xml
                     mediator-conf.properties
                     publish-events-data-conf.properties
                     oneapi-validation-conf.properties
                     MobileCountryConfig.xml
                     workflow-extensions.xml
                     workflow.properties
                     workflow-configuration.xml
                     Owasp.CsrfGuard.Carbon.properties
                     spendLimit.xml

                     repository/deployment/server/synapse-configs/synapse-configs/default/sequences      custom_message.xml
                     repository/deployment/server/synapse-configs/synapse-configs/default/sequences       httpHeaderSeq.xml
                     repository/deployment/server/synapse-configs/synapse-configs/default/sequences       WSO2AMExtIn.xml
                     repository/deployment/server/synapse-configs/synapse-configs/default/sequences       WSO2AMExO-ut.xml
        -->

        <!--End of DEP Hub related configs -->

        <!--copying identity.xml-->


    </files>
</assembly>
